const express=require("express"),axios=require("axios"),cors=require("cors"),app=express();app.use(cors()),app.use(express.json());const RUNWAY_API_URL="https://api.dev.runwayml.com/v1",RUNWAY_API_KEY=process.env.RUNWAY_API_KEY;app.post("/api/image-to-video",(async(req,res)=>{try{const{promptImage:promptImage,seed:seed,model:model,promptText:promptText,duration:duration,ratio:ratio}=req.body,runwayRes=await axios.post(`${RUNWAY_API_URL}/image_to_video`,{promptImage:promptImage,seed:seed,model:model,promptText:promptText,duration:duration,ratio:ratio},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${RUNWAY_API_KEY}`,"X-Runway-Version":"2024-11-06"}});res.json(runwayRes.data)}catch(err){res.status(500).json({error:err.response?.data?.error||err.message})}})),app.get("/api/task/:id",(async(req,res)=>{try{const{id:id}=req.params,runwayRes=await axios.get(`${RUNWAY_API_URL}/tasks/${id}`,{headers:{Authorization:`Bearer ${RUNWAY_API_KEY}`,"X-Runway-Version":"2024-11-06"}});res.json(runwayRes.data)}catch(err){res.status(500).json({error:err.response?.data?.error||err.message})}}));const PORT=process.env.PORT||4e3;app.listen(PORT,(()=>console.log(`Proxy listening on port ${PORT}`)));